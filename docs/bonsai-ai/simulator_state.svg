<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="655px" preserveAspectRatio="none" style="width:561px;height:655px;" version="1.1" viewBox="0 0 561 655" width="561px" zoomAndPan="magnify"><defs><filter height="300%" id="fp3yupcqrq5qp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="98" cy="18" fill="#000000" filter="url(#fp3yupcqrq5qp)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fp3yupcqrq5qp)" height="78.8867" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="20" y="89"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="20" x2="176" y1="115.4883" y2="115.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="87" y="107.5352">init</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="136" x="25" y="132.0898">`sim = Simulator(brain)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="25" y="146.2227">`while sim.run():</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="25" y="160.3555">`  pass</text><rect fill="#FEFECE" filter="url(#fp3yupcqrq5qp)" height="64.7539" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="6" y="229"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="190" y1="255.4883" y2="255.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="52" y="247.5352">episode_start</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="11" y="272.0898">`def episode_start(params):</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="11" y="286.2227">`  return initial_state</text><rect fill="#FEFECE" filter="url(#fp3yupcqrq5qp)" height="64.7539" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="225" y="229"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="225" x2="431" y1="255.4883" y2="255.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="299" y="247.5352">simulate</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="124" x="230" y="272.0898">`def simulate(action):</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="186" x="230" y="286.2227">`  return state, reward, terminal</text><rect fill="#FEFECE" filter="url(#fp3yupcqrq5qp)" height="64.7539" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="141.5" y="371"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="141.5" x2="300.5" y1="397.4883" y2="397.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="163" y="389.5352">episode_finished</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="139" x="146.5" y="414.0898">`def episode_finished():</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="146.5" y="428.2227">`  # sim cleanup</text><rect fill="#FEFECE" filter="url(#fp3yupcqrq5qp)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="183.5" y="513"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="183.5" x2="258.5" y1="539.4883" y2="539.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="193.5" y="531.5352">finished</text><ellipse cx="221" cy="634" fill="none" filter="url(#fp3yupcqrq5qp)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="221.5" cy="634.5" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><!--link *start to init--><path d="M98,28.1975 C98,40.8558 98,63.2766 98,83.7144 " fill="none" id="*start-init" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="98,88.8606,102,79.8606,98,83.8606,94,79.8606,98,88.8606" style="stroke: #A80036; stroke-width: 1.0;"/><!--link init to episode_start--><path d="M98,168.0443 C98,185.5314 98,206.012 98,223.3365 " fill="none" id="init-episode_start" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="98,228.6049,102,219.6049,98,223.6049,94,219.6049,98,228.6049" style="stroke: #A80036; stroke-width: 1.0;"/><!--link episode_start to simulate--><path d="M190.0898,261.5 C199.9529,261.5 209.8159,261.5 219.679,261.5 " fill="none" id="episode_start-simulate" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="224.8367,261.5,215.8367,257.5,219.8367,261.5,215.8367,265.5,224.8367,261.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link simulate to simulate--><path d="M431.214,250.3733 C451.5376,251.6456 466,255.3545 466,261.5 C466,267.1174 453.9165,270.699 436.3184,272.2447 " fill="none" id="simulate-simulate" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="431.214,272.6267,440.4875,275.9436,436.2,272.2534,439.8903,267.9659,431.214,272.6267" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="472" y="266.5684">not terminal</text><!--link simulate to episode_finished--><path d="M334.088,294.0311 C335.2784,309.2548 334.1594,327.0587 326,341 C319.9055,351.4132 311.3363,360.2843 301.6929,367.7846 " fill="none" id="simulate-episode_finished" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="297.4983,370.9156,307.1033,368.7375,301.5051,367.9248,302.3179,362.3266,297.4983,370.9156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="333" y="337.5684">is terminal</text><!--link simulate to episode_finished--><path d="M243.1058,294.0331 C231.4938,302.0843 221.1305,311.9589 214,324 C206.6433,336.423 206.4354,351.9045 208.7754,365.8963 " fill="none" id="simulate-episode_finished" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="209.7443,370.9754,211.9868,361.3852,208.8073,366.064,204.1286,362.8844,209.7443,370.9754" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="215" y="337.5684">no more actions</text><!--link episode_finished to episode_start--><path d="M149.3407,370.9448 C137.1021,362.6719 125.5882,352.7264 117,341 C108.188,328.9681 103.4091,313.4169 100.8369,299.2637 " fill="none" id="episode_finished-episode_start" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="99.9857,294.1216,97.5092,303.654,100.8023,299.0545,105.4018,302.3475,99.9857,294.1216" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="118" y="337.5684">next episode</text><!--link episode_finished to finished--><path d="M221,436.0587 C221,457.8469 221,486.3252 221,507.642 " fill="none" id="episode_finished-finished" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="221,512.8987,225,503.8987,221,507.8987,217,503.8987,221,512.8987" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="222" y="479.5684">no more episodes</text><!--link finished to *end--><path d="M221,563.2229 C221,580.8366 221,603.7774 221,618.6928 " fill="none" id="finished-*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="221,623.8002,225,614.8002,221,618.8002,217,614.8002,221,623.8002" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml simulator_state
    [*] - -> init
    init - -> episode_start
    init: `sim = Simulator(brain)
    init: `while sim.run():
    init: `  pass


    episode_start -right-> simulate
    episode_start: `def episode_start(params):
    episode_start: `  return initial_state

    simulate - -> simulate: not terminal
    simulate: `def simulate(action):
    simulate: `  return state, reward, terminal

    simulate - -> episode_finished: is terminal
    simulate - -> episode_finished: no more actions

    episode_finished - -> episode_start: next episode
    episode_finished: `def episode_finished():
    episode_finished: `  # sim cleanup

    episode_finished - -> finished: no more episodes

    finished - -> [*]
    @enduml

PlantUML version 1.2018.03(Thu Apr 05 09:59:15 PDT 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_121-b13
Operating System: Mac OS X
OS Version: 10.13.3
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>